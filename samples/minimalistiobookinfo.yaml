#Pre-requisite: A Kubernetes cluster. 
#Description: This design installs the Istio control plane version 1.12.0 with minimal configuration and deploys the "Book Info" sample application. 
#Caveats: This design is currenly unsupported in MeshMap designer, but is supported by mesheryctl and Meshery Server
name: istio
services:
  istioinstallation:
    type: $(#use https://raw.githubusercontent.com/revolyssup/service-mesh-patterns/new/samples/istioinstall.yaml)
    settings: 
        control Plane Namespace: istio-system
        data Plane Namespace: default
        istio Version: 1.12.0
        profile: minimal
  bookinfo:
    type: $(#use https://raw.githubusercontent.com/revolyssup/service-mesh-patterns/new/samples/bookInfoPattern.yaml)
    settings: 
      namespace: default
    dependsOn:
      - istioinstallation

  
